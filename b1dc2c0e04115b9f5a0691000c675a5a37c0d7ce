{
  "comments": [
    {
      "key": {
        "uuid": "9a245df4_8a50eb5f",
        "filename": "db_scripts/diff/153231.down",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2017-03-21T15:41:48Z",
      "side": 1,
      "message": "DROP TABLE IF EXIST?",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 32
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_ea4d27c6",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2017-03-21T15:41:48Z",
      "side": 1,
      "message": "IF NOT EXISTS?",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 12
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_6ae8177d",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2017-03-21T15:50:39Z",
      "side": 1,
      "message": "Is there a point in that? Other similar statements (ALTER TABLE) don\u0027t include an \"only if not already done\" condition either.",
      "parentUuid": "9a245df4_ea4d27c6",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 12
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_6ab6578c",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2017-03-21T16:16:39Z",
      "side": 1,
      "message": "please do not use \"if not exists\" for create table, as it MUST fail if there is a table already rather than silently skipping it (a customer created a table with the same name for some reason .... ).",
      "parentUuid": "9a245df4_ea4d27c6",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 12
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_ad67c9e9",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2017-03-21T16:51:18Z",
      "side": 1,
      "message": "Up2 Kirill here.\n\n\u003e a customer created a table with the same name for some reason\n\nMaybe then:\n\n\u003e DROP IF EXIST `recording_metakeys`;\n\u003e CREATE TABLE `recording_metakeys`  ...\n\nnope? :-)\n\nMy point it will happens at the middle of upgrade in the middle of the night... you will be waked up then.",
      "parentUuid": "9a245df4_6ab6578c",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 12
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_aa532f6b",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2017-03-21T15:41:48Z",
      "side": 1,
      "message": "is it possible to provide defaults for the fields?\n\nIn this case we will be able to provide DB backward compatibility. When we have sp1 with old release and sp2 with new release and DB is already new and old sp1 is still active.\n\nIt is not a reason for THIS particular case, while the rule every field must have a default in case if old code doesn\u0027t provide it , IMHO very useful during the upgrade.\n\nWhat do you think?",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 8,
        "endChar": 29
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_caf8234c",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2017-03-21T15:50:39Z",
      "side": 1,
      "message": "Not sure I understand the reasoning, since these values are mandatory and can not ever be missing. In fact, missing values would be an error. But doesn\u0027t matter to me either way. Keep in mind that the other related tables (recording_calls and recording_streams) already exist without default values.",
      "parentUuid": "9a245df4_aa532f6b",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 8,
        "endChar": 29
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_4abb9372",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2017-03-21T16:16:39Z",
      "side": 1,
      "message": "it\u0027s fine as NOT NULL (defaults should be provided for \"NULL\" columns where \"NOT NULL\" is automatically inclusive for a mandatory value)",
      "parentUuid": "9a245df4_caf8234c",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 8,
        "endChar": 29
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_cd5e7d12",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2017-03-21T16:51:18Z",
      "side": 1,
      "message": "My concert is to care about the moment of upgrade when sp1 active node with old code have to work with new DB because sp2 has already been upgraded.\n\nIn this code every new column we add must have a default value, because old code has no ideas about new columns.\n\n\nIt is not a case here, as you introduce new table and service here, while in gerenal from the past experience: having defaults simplifies upgrades.",
      "parentUuid": "9a245df4_4abb9372",
      "range": {
        "startLine": 6,
        "startChar": 0,
        "endLine": 8,
        "endChar": 29
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_0a651b45",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2017-03-21T15:41:48Z",
      "side": 1,
      "message": "should we put this into \"ngcp-grant-privileges\" kirill created in mr4.5?\n\n\nP.S. AFAIK, it is not \"covered\" by COMMIT ;-)",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 72
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_2a957fe4",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2017-03-21T15:50:39Z",
      "side": 1,
      "message": "Where do I find that?",
      "parentUuid": "9a245df4_0a651b45",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 72
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_aaafaf2a",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2017-03-21T16:16:39Z",
      "side": 1,
      "message": "we can remove it from here.\n/etc/ngcp-config/templates/etc/mysql/grants.yml \nis the place where we have all our grants. please update it there.",
      "parentUuid": "9a245df4_2a957fe4",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 72
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_2a63bf1b",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2017-03-21T16:20:42Z",
      "side": 1,
      "message": "It\u0027s added there already:\nhttps://gerrit.mgm.sipwise.com/#/c/12147/3/mysql/grants.yml\nSo that makes explicit `grant` statements obsolete?",
      "parentUuid": "9a245df4_aaafaf2a",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 72
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a245df4_2d9bd9ca",
        "filename": "db_scripts/diff/153231.up",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2017-03-21T16:51:18Z",
      "side": 1,
      "message": "AFAIK, yes. Kirill?",
      "parentUuid": "9a245df4_2a63bf1b",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 72
      },
      "revId": "b1dc2c0e04115b9f5a0691000c675a5a37c0d7ce",
      "serverId": "85315e57-5f03-49c3-83f8-201ae2313a75",
      "unresolved": false
    }
  ]
}